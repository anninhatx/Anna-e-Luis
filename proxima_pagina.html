<script>
  window.addEventListener('DOMContentLoaded', () => {
    atualizarContador();
    setInterval(atualizarContador, 1000);

    // Carrossel automático
    const carrossel = document.getElementById('carrossel');
    const totalSlides = carrossel.children.length;
    let index = 0;

    setInterval(() => {
      index = (index + 1) % totalSlides;
      carrossel.style.transform = `translateX(-${index * 320}px)`;
    }, 3000);

    // Chuva de corações
    setInterval(() => {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = Math.random() * window.innerWidth + 'px';
      heart.style.top = '-40px';
      heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 6000);
    }, 300);

    // Texto com efeito de digitação
    const texto = "Meu amor, a cada dia que passa, meu coração se enche mais de carinho e admiração por você. A nossa conexão não é nenhuma novidade. Desde o momento zero, ela estava lá. Mesmo que a gente não fizesse ideia disso. Os anos foram se passando e essa conexão se aprofundando... E eu me sinto tão, tão privilegiada do universo ter alinhado nossos caminhos. O que a gente tem é lindo e é raro: viver um relacionamento assim, tranquilo, cheio de amor, compreensão, acolhimento e tantas outras qualidades que a gente conseguiu juntos. Você é a razão dos meus melhores pensamentos, e tudo ao seu lado se torna mais bonito e significativo. Quero compartilhar toda a minha vida ao seu lado. Eu te amo, Luis!❤️";
    
    let i = 0;
    function digitar() {
      if (i < texto.length) {
        document.getElementById('mensagemFinal').innerHTML += texto.charAt(i);
        i++;
        setTimeout(digitar, 15);
      }
    }
    digitar();
  });

  // Contador separado para funcionar no load
  function atualizarContador() {
    const inicio = new Date('2022-06-04T00:00:00');
    const agora = new Date();

    let anos = agora.getFullYear() - inicio.getFullYear();
    let meses = agora.getMonth() - inicio.getMonth();
    let dias = agora.getDate() - inicio.getDate();

    if (dias < 0) {
      meses--;
      const mesAnterior = new Date(agora.getFullYear(), agora.getMonth(), 0);
      dias += mesAnterior.getDate();
    }

    if (meses < 0) {
      anos--;
      meses += 12;
    }

    const diff = agora - inicio;
    const horas = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutos = Math.floor((diff / (1000 * 60)) % 60);
    const segundos = Math.floor((diff / 1000) % 60);

    document.getElementById('contador').innerText =
      `${anos} anos, ${meses} meses, ${dias} dias, ${horas} horas, ${minutos} minutos e ${segundos} segundos`;
  }
</script>
